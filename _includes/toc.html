<div class="table-of-contents">
  <h2>Table des matières</h2>
  <ul id="toc-list">
    <!-- Le JavaScript remplira cette liste -->
  </ul>
</div>

<style>
  .table-of-contents {
    background: #f8f8f8;
    padding: 15px;
    margin-bottom: 20px;
    border-radius: 5px;
  }
  .table-of-contents h2 {
    margin-top: 0;
  }
  .toc-level-2 {
    margin-left: 0;
  }
  .toc-level-3 {
    margin-left: 20px;
  }
  .toc-level-4 {
    margin-left: 40px;
  }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Sélectionne l'élément où la table des matières sera ajoutée
  const tocList = document.getElementById('toc-list');
  
  // Sélectionne le contenu de l'article en ciblant la classe container
  const articleContent = document.querySelector('.container');
  
  if (articleContent && tocList) {
    // Trouve tous les titres h2, h3, h4
    const headers = articleContent.querySelectorAll('h2, h3, h4');
    
    // Si aucun titre n'est trouvé, cache la table des matières
    if (headers.length === 0) {
      document.querySelector('.table-of-contents').style.display = 'none';
      return;
    }
    
    // Pour chaque titre trouvé
    headers.forEach(function(header) {
      // Crée un ID unique si le titre n'en a pas déjà un
      if (!header.id) {
        const headerId = header.textContent
          .toLowerCase()
          .replace(/[^a-z0-9]+/g, '-')
          .replace(/(^-|-$)/g, '');
        header.id = headerId;
      }
      
      // Crée un élément de liste pour la table des matières
      const listItem = document.createElement('li');
      listItem.className = 'toc-level-' + header.tagName.charAt(1);
      
      // Crée un lien vers le titre
      const link = document.createElement('a');
      link.href = '#' + header.id;
      link.textContent = header.textContent;
      
      // Ajoute le lien à l'élément de liste
      listItem.appendChild(link);
      
      // Ajoute l'élément de liste à la table des matières
      tocList.appendChild(listItem);
    });
  }
});
</script>
