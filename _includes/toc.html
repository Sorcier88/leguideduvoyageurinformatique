<div class="table-of-contents">
  <h2>Table des mati√®res</h2>
  <ul id="toc-list"></ul>
</div>

<style>
  .table-of-contents {
    background: #f8f8f8;
    padding: 15px;
    margin-bottom: 20px;
    border-radius: 5px;
  }
  .table-of-contents h2 {
    margin-top: 0;
  }
  .toc-level-2 {
    margin-left: 0;
  }
  .toc-level-3 {
    margin-left: 20px;
  }
  .toc-level-4 {
    margin-left: 40px;
  }
</style>

<script>
window.addEventListener('load', function() {
  const tocList = document.getElementById('toc-list');
  const headers = document.body.querySelectorAll('h2, h3, h4');
  
  if (headers.length === 0) {
    document.querySelector('.table-of-contents').style.display = 'none';
  } else {
    headers.forEach(function(header) {
      if (!header.id) {
        header.id = 'toc-' + Math.random().toString(36).substr(2, 9);
      }
      
      const listItem = document.createElement('li');
      listItem.className = 'toc-level-' + header.tagName.charAt(1);
      
      const link = document.createElement('a');
      link.href = '#' + header.id;
      link.textContent = header.textContent;
      
      listItem.appendChild(link);
      tocList.appendChild(listItem);
    });
  }
});
</script>
